<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <!-- Belangrijk op touch: geen zoomen tijdens slepen -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hulpschema +/- 1000</title>
    <style>
        /* --- Algemene Stijlen --- */
        body {
            font-family: sans-serif;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
            margin: 0;
            padding: 0;
            display: flex;
            min-height: 100vh;
            flex-direction: column;
            background-color: #f0f4f8;
        }

        /* Zorg dat touch nooit pan/zoom overneemt tijdens drag */
        .tool, .drop-zone, #toolbar, #main, #schema-plus, #schema-min, #vuilbak-container {
            touch-action: none;
            -ms-touch-action: none;
        }

        /* --- Startscherm Styling --- */
        #start-screen {
            background-image: url('start_afbeeldingen/achtergrond.png');
            background-size: cover;
            background-position: center;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        #start-screen-container {
            text-align: center;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 40px;
            border-radius: 15px;
        }
        .keuzescherm { display: flex; justify-content: center; gap: 4em; margin-top: 2em; }
        .keuzeblok { display: flex; flex-direction: column; align-items: center; }
        .knop-keuze {
            font-size: 6em;
            font-weight: bold;
            color: white;
            border: none;
            border-radius: 20px;
            width: 180px;
            height: 180px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
            transition: transform 0.1s ease;
        }
        .knop-keuze:active { transform: scale(0.95); }
        .knop-keuze.plus { background-color: #1e90ff; }
        .knop-keuze.min { background-color: orange; }

        /* --- Stijl voor Terug-knop --- */
        .btn-actie {
          padding: 16px 32px;
          font-size: 1.6em;
          border: none;
          border-radius: 12px;
          cursor: pointer;
          color: #fff;
          font-family: inherit;
          margin: 10px 0;
          box-shadow: 0 4px 12px rgba(0,0,0,0.08);
          transition: background 0.2s, box-shadow 0.2s;
          display: flex;
          align-items: center;
          gap: 10px;
        }
        .btn-terug {
          background-color: #b71c1c;
          position: fixed;
          top: 20px;
          left: 20px;
          z-index: 1000;
        }
        .btn-terug:hover,
        .btn-terug:focus { background-color: #e53935; }
        
        /* --- Hoofd Applicatie Styling --- */
        #main-app {
            display: none;
            flex-direction: row;
            width: 100%;
            height: 100vh;
        }
        #sidebar {
            width: 180px;
            background-color: #f0f4f8;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .knop {
            padding: 15px;
            font-size: 1.1em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            text-align: center;
        }
        .knop.opnieuw { background-color: #28a745; }
        .knop.opnieuw:hover { background-color: #218838; }
        .knop.ander-schema { background-color: #dc3545; }
        .knop.ander-schema:hover { background-color: #c82333; }
        .knop.wissel { background-color: #007bff; }
        .knop.wissel:hover { background-color: #0056b3; }
        
        #vuilbak-container {
            border: 2px dashed grey; border-radius: 8px; padding: 10px;
            text-align: center; margin-top: auto;
        }
        #vuilbak { 
            width: 150px; height: 150px; margin: 0 auto 10px auto; pointer-events: none;
        }
        #vuilbak-teller div { font-weight: bold; font-size: 1.1em; display: flex; justify-content: space-around; }
        #vuilbak-teller div:first-child span:nth-child(1) { color: #B4C6E7; font-weight: bold; }
        #vuilbak-teller div:first-child span:nth-child(2) { color: #C5E0B3; font-weight: bold; }
        #vuilbak-teller div:first-child span:nth-child(3) { color: #FFD965; font-weight: bold; }

        #main {
            flex-grow: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            position: relative; 
        }
        #main h1 {
            text-align: center;
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 2em;
            color: #333;
        }
        #toolbar {
            background-color: white;
            border: 1px solid #ddd;
            padding: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            min-height: 80px;
        }
        
        /* --- Toolbar knoppen --- */
        .toolbar-btn, .exchange-btn {
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }
        .toolbar-btn:hover, .exchange-btn:hover { background-color: #0056b3; }
        .toolbar-btn {
            padding: 20px 30px;
            font-size: 1.5em;
            border-radius: 8px;
            font-weight: bold;
        }
        .exchange-btn {
            padding: 10px 15px;
            font-size: 1em;
            border-radius: 5px;
            position: absolute;
            z-index: 100;
        }
        
        /* --- Tool Styling --- */
        .tool { cursor: grab; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .geel-blok { background-color: #ffd700; width: 35px; height: 35px; border: 2px solid #444; border-radius: 6px; }
        .tool.staaf-groen {
            width: 180px; height: 20px;
            border: 2px solid #444; border-radius: 6px; background-color: #32CD32;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25'%3E%3Cdefs%3E%3Cpattern id='p' width='18' height='20' patternUnits='userSpaceOnUse'%3E%3Cpath d='M18 0 v20' stroke='%23444' stroke-width='1'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='url(%23p)'/%3E%3C/svg%3E");
        }
        .tool.vlak-blauw {
            width: 100px; height: 100px; border: 2px solid #444; border-radius: 6px; background-color: #3399FF;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25'%3E%3Cdefs%3E%3Cpattern id='p' width='12' height='12' patternUnits='userSpaceOnUse'%3E%3Cpath d='M0 12 h12 M12 0 v12' stroke='%23444' stroke-width='0.5'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='url(%23p)'/%3E%3C/svg%3E");
        }
        .schijf { border-radius: 50%; width: 55px; height: 55px; border: 2px solid #444; font-size: 22px; }
        .schijf-geel { background-color: #ffd700; }
        .schijf-groen { background-color: #32CD32; }
        .schijf-blauw { background-color: #3399FF; }

        /* --- Algemeen Schema --- */
        .schema-container { flex-grow: 1; display: none; grid-template-rows: auto 1fr; border: 1px solid #666; background-color: white; }
        .schema-header { display: grid; grid-template-columns: 1fr 1fr 1fr; text-align: center; font-size: 1.5rem; font-weight: 700; color: white; }
        .schema-header > div { padding: 0.5rem; border-left: 1px solid #666; }
        .schema-header > div:first-child { border-left: none; }
        .header-h { background-color: #B4C6E7; }
        .header-t { background-color: #C5E0B3; }
        .header-e { background-color: #FFD965; }

        /* --- PLUS Schema --- */
        #schema-plus .schema-body { display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 0.5fr 1.5fr 1fr; }
        #schema-plus .schema-vak { border-right: 1px solid #ccc; border-top: 1px solid #ccc; position: relative; }
        #schema-plus .schema-body .schema-vak:nth-child(3n) { border-right: none; }

        #schema-plus .plus-r1-h { background-color: #D9E2F3; }
        #schema-plus .plus-r1-t { background-color: #E2EFD9; }
        #schema-plus .plus-r1-e { background-color: #FFF2CC; }

        #schema-plus .plus-t-span {
            position: relative; top: 5%; left: 5%; width: 90%; height: 390%;
            border: 4px solid #32CD32; border-radius: 12px; z-index: 5; pointer-events: auto;
        }
        #schema-plus .plus-r1-t, #schema-plus .plus-r2-t { pointer-events: none; }
        #schema-plus .plus-r2-t { background-color: white; }

        #schema-plus .plus-r2-e { display: flex; align-items: center; justify-content: center; }
        #schema-plus .plus-e-inner { position: relative; width: 90%; height: 85%; border: 4px solid #ffd700; border-radius: 12px; }
        
        /* --- MIN Schema --- */
        #schema-min { border-collapse: collapse; }
        #schema-min .schema-body { display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr auto; }
        #schema-min .min-top-vak { border-right: 1px solid #666; border-top: 1px solid #666; position: relative; }
        #schema-min .min-top-vak:last-child { border-right: none; }
        #schema-min .min-bottom-container { border-right: 1px solid #666; border-top: 1px solid #666; padding: 20px 10px; position: relative; }
        #schema-min .min-bottom-container:last-child { border-right: none; }
        #schema-min .min-bottom-box { height: 240px; border-width: 4px; border-style: solid; border-radius: 20px; position: relative; z-index: 1; }
        #schema-min .min-bottom-container:nth-child(4) .min-bottom-box { border-color: #B4C6E7; }
        #schema-min .min-bottom-container:nth-child(5) .min-bottom-box { border-color: #C5E0B3; }
        #schema-min .min-bottom-container:nth-child(6) .min-bottom-box { border-color: #FFD965; }
        #schema-min .min-bottom-container:nth-child(4)::after,
        #schema-min .min-bottom-container:nth-child(5)::after {
            content: ''; position: absolute; background-color: white;
            width: 28px; height: 40px; top: 50%; right: 0px; transform: translate(50%, -50%); z-index: 2;
        }

        .drag-ghost { position: absolute; pointer-events: none; z-index: 1000; opacity: 0.85; }
    </style>
</head>
<body>

    <div id="start-screen">
        <button class="btn-actie btn-terug" onclick="window.location.href='keuze-hulpschema.html'">Terug</button>
        <div id="start-screen-container">
            <h1>Kies hier je schema</h1>
            <div class="keuzescherm">
                <div class="keuzeblok"><button id="btn-start-plus" class="knop-keuze plus">+</button></div>
                <div class="keuzeblok"><button id="btn-start-min" class="knop-keuze min">–</button></div>
            </div>
        </div>
    </div>

    <div id="main-app">
        <div id="sidebar">
            <button id="reset" class="knop opnieuw">Opnieuw</button>
            <button id="terug" class="knop ander-schema">Terug</button>
            <button id="wissel-schema" class="knop wissel"></button>
            <div id="vuilbak-container" style="display: none;">
                <img id="vuilbak" src="afbeeldingen_hulpschema/vuilbak.png" alt="vuilbak">
                <div id="vuilbak-teller">
                    <div><span>H</span><span>T</span><span>E</span></div>
                    <div><span id="h-count">0</span><span id="t-count">0</span><span id="e-count">0</span></div>
                </div>
            </div>
        </div>

        <div id="main">
            <h1 id="app-title"></h1>
            <div id="toolbar"></div>
            
            <div id="schema-plus" class="schema-container">
                <div class="schema-header"><div class="header-h">H</div><div class="header-t">T</div><div class="header-e">E</div></div>
                <div class="schema-body">
                    <div class="schema-vak plus-r1-h drop-zone"></div>
                    <div class="schema-vak plus-r1-t">
                        <div class="plus-t-span drop-zone"></div>
                    </div>
                    <div class="schema-vak plus-r1-e drop-zone"></div>
                    <div class="schema-vak plus-r2-h drop-zone"></div>
                    <div class="schema-vak plus-r2-t"></div>
                    <div class="schema-vak plus-r2-e">
                        <div class="plus-e-inner drop-zone"></div>
                    </div>
                    <div class="schema-vak plus-r3-h drop-zone"></div>
                    <div class="schema-vak plus-r3-t drop-zone"></div>
                    <div class="schema-vak plus-r3-e drop-zone"></div>
                </div>
            </div>
            
            <div id="schema-min" class="schema-container">
                <div class="schema-header"><div class="header-h">H</div><div class="header-t">T</div><div class="header-e">E</div></div>
                <div class="schema-body">
                    <div class="min-top-vak drop-zone"></div>
                    <div class="min-top-vak drop-zone"></div>
                    <div class="min-top-vak drop-zone"></div>
                    <div class="min-bottom-container"><div class="min-bottom-box drop-zone" data-column="H"></div></div>
                    <div class="min-bottom-container"><div class="min-bottom-box drop-zone" data-column="T"></div></div>
                    <div class="min-bottom-container"><div class="min-bottom-box drop-zone" data-column="E"></div></div>
                </div>
            </div>

        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const startScreen = document.getElementById('start-screen');
        const mainApp = document.getElementById('main-app');
        const btnStartPlus = document.getElementById('btn-start-plus');
        const btnStartMin = document.getElementById('btn-start-min');
        const appTitle = document.getElementById('app-title');
        const toolbar = document.getElementById('toolbar');
        const btnReset = document.getElementById('reset');
        const btnTerug = document.getElementById('terug');
        const btnWisselSchema = document.getElementById('wissel-schema'); 
        
        const schemaPlus = document.getElementById('schema-plus');
        const schemaMin = document.getElementById('schema-min');
        const mainContent = document.getElementById('main');

        const vuilbakContainer = document.getElementById('vuilbak-container');
        const hCount = document.getElementById('h-count');
        const tCount = document.getElementById('t-count');
        const eCount = document.getElementById('e-count');

        let dragEl = null, ghost = null, offsetX = 0, offsetY = 0, fromToolbar = false;

        const toolDefs = {
            blokjes: [
              { class: 'tool vlak-blauw', value: 100 },
              { class: 'tool staaf-groen', value: 10 },
              { class: 'tool geel-blok',  value: 1 }
            ],
            schijfjes: [
              { class: 'tool schijf schijf-blauw', value: 100, text: '100' },
              { class: 'tool schijf schijf-groen', value: 10,  text: '10'  },
              { class: 'tool schijf schijf-geel',  value: 1,   text: '1'   }
            ]
        };

        function startApp(mode) {
            startScreen.style.display = 'none';
            mainApp.style.display = 'flex';
            appTitle.textContent = mode === 'plus' ? 'Hulpschema +' : 'Hulpschema -';
            schemaPlus.style.display = mode === 'plus' ? 'grid' : 'none';
            schemaMin.style.display  = mode === 'min'  ? 'grid'  : 'none';
            btnWisselSchema.textContent = mode === 'plus' ? 'Wissel naar –' : 'Wissel naar +';
            vuilbakContainer.style.display = mode === 'min' ? 'block' : 'none';
            renderToolbarHome();
            resetApp();
        }

        function resetApp() {
            document.querySelectorAll('.drop-zone').forEach(z => z.innerHTML = '');
            hCount.textContent = '0'; tCount.textContent = '0'; eCount.textContent = '0';
            updateSchema();
        }

        function returnToStart() {
            mainApp.style.display = 'none';
            startScreen.style.display = 'flex';
            resetApp();
        }

        function renderToolbarHome() {
            toolbar.innerHTML = '';
            const b = document.createElement('button');
            b.className = 'toolbar-btn'; b.textContent = 'Blokjes'; b.onclick = () => renderTools('blokjes');
            const s = document.createElement('button');
            s.className = 'toolbar-btn'; s.textContent = 'Schijfjes'; s.onclick = () => renderTools('schijfjes');
            toolbar.append(b, s);
        }

        function renderTools(type) {
            toolbar.innerHTML = '';
            toolDefs[type].forEach(info => {
                const el = document.createElement('div');
                el.className = info.class;
                el.dataset.value = info.value;
                if (info.text) el.textContent = info.text;
                toolbar.appendChild(el);
            });
            const back = document.createElement('button');
            back.className = 'toolbar-btn'; back.textContent = 'Terug'; back.onclick = renderToolbarHome;
            toolbar.appendChild(back);
        }

        function isInside(el, x, y) {
            if (!el) return false;
            const r = el.getBoundingClientRect();
            return x >= r.left && x <= r.right && y >= r.top && y <= r.bottom;
        }

        function pointerDown(e) {
            const tgt = e.target.closest('.tool');
            if (!tgt) return;

            if (e.cancelable) e.preventDefault();
            document.body.style.userSelect = 'none';

            fromToolbar = (tgt.parentElement === toolbar);

            dragEl = fromToolbar ? tgt.cloneNode(true) : tgt;
            dragEl.style.position = 'absolute';
            dragEl.style.zIndex = '1000';
            dragEl.style.transform = 'none';

            const rect = tgt.getBoundingClientRect();
            offsetX = e.clientX - rect.left;
            offsetY = e.clientY - rect.top;

            ghost = dragEl.cloneNode(true);
            ghost.classList.add('drag-ghost');
            document.body.appendChild(ghost);

            ghost.style.left = `${e.clientX - offsetX}px`;
            ghost.style.top  = `${e.clientY - offsetY}px`;

            if (dragEl.setPointerCapture && e.pointerId != null) {
                try { dragEl.setPointerCapture(e.pointerId); } catch {}
            }

            document.addEventListener('pointermove', pointerMove, { passive: false });
            document.addEventListener('pointerup', pointerUp,   { once: true, passive: false });
        }

        function pointerMove(e) {
            if (!ghost) return;
            if (e.cancelable) e.preventDefault();
            ghost.style.left = `${e.clientX - offsetX}px`;
            ghost.style.top  = `${e.clientY - offsetY}px`;
        }

        function pointerUp(e) {
            document.removeEventListener('pointermove', pointerMove);
            document.body.style.userSelect = '';

            if (!ghost || !dragEl) { cleanupDrag(); return; }

            // Hit-test: vuilbak eerst (alleen in MIN)
            const isMin = (schemaMin.style.display === 'grid');
            let droppedInTrash = false;

            if (isMin && isInside(document.getElementById('vuilbak-container'), e.clientX, e.clientY)) {
                // Alleen items die niet uit de toolbar komen tellen
                if (!fromToolbar) {
                    const val = parseInt(dragEl.dataset.value, 10);
                    if (val === 100) hCount.textContent = String(parseInt(hCount.textContent) + 1);
                    if (val === 10)  tCount.textContent = String(parseInt(tCount.textContent) + 1);
                    if (val === 1)   eCount.textContent = String(parseInt(eCount.textContent) + 1);
                    dragEl.remove();
                }
                droppedInTrash = true;
                updateSchema();
                cleanupDrag();
                return;
            }

            // Dropzone zoeken
            const dropTarget = document.elementFromPoint(e.clientX, e.clientY)?.closest('.drop-zone');
            if (!dropTarget) { cleanupDrag(); return; }

            const zr = dropTarget.getBoundingClientRect();
            const final = fromToolbar ? dragEl : dragEl; // bij fromToolbar gebruiken we de kloon (al bepaald)
            if (fromToolbar) final.id = `tool-${Date.now()}`;

            final.style.position = 'absolute';
            final.style.left = `${e.clientX - zr.left - offsetX}px`;
            final.style.top  = `${e.clientY - zr.top  - offsetY}px`;
            final.style.transform = 'none';

            // In MIN: markeer uitwisselbaar wanneer in onderste boxen
            if (dropTarget.matches('#schema-min .min-bottom-box')) {
                final.dataset.canExchange = 'true';
            } else {
                delete final.dataset.canExchange;
            }

            dropTarget.appendChild(final);
            updateSchema();
            cleanupDrag();
        }

        function cleanupDrag() {
            if (ghost) { ghost.remove(); ghost = null; }
            dragEl = null;
            fromToolbar = false;
        }

        function updateSchema() {
            document.querySelectorAll('.exchange-btn').forEach(b => b.remove());
            if (schemaPlus.style.display === 'grid') updatePlusSchema();
            if (schemaMin.style.display  === 'grid') updateMinSchema();
        }

        function addExchangeButton(zoneEl, onClick) {
            const btn = document.createElement('button');
            btn.textContent = 'wissel om';
            btn.className = 'exchange-btn';

            const zoneRect = zoneEl.getBoundingClientRect();
            const mainRect = mainContent.getBoundingClientRect();
            btn.style.left = `${zoneRect.left - mainRect.left}px`;
            btn.style.top  = `${zoneRect.top  - mainRect.top  - 45}px`;

            btn.onclick = onClick;
            mainContent.appendChild(btn);
        }

        function updatePlusSchema() {
            const unitsZone = document.querySelector('#schema-plus .plus-e-inner');
            const tensZone  = document.querySelector('#schema-plus .plus-t-span');
            const units = unitsZone.querySelectorAll('[data-value="1"]');
            const tens  = tensZone.querySelectorAll('[data-value="10"]');

            if (units.length === 10) {
                addExchangeButton(unitsZone, () => {
                    const isDisc = units[0].classList.contains('schijf');
                    units.forEach(n => n.remove());
                    const newTen = document.createElement('div');
                    newTen.dataset.value = '10';
                    newTen.style.position = 'absolute';
                    newTen.style.left = '10px'; newTen.style.top = '10px';
                    newTen.className = isDisc ? 'tool schijf schijf-groen' : 'tool staaf-groen';
                    if (isDisc) newTen.textContent = '10';
                    tensZone.appendChild(newTen);
                    updateSchema();
                });
            }

            if (tens.length === 10) {
                addExchangeButton(tensZone, () => {
                    const isDisc = tens[0].classList.contains('schijf');
                    tens.forEach(n => n.remove());
                    const newHundred = document.createElement('div');
                    newHundred.dataset.value = '100';
                    newHundred.style.position = 'absolute';
                    newHundred.style.left = '10px'; newHundred.style.top = '10px';
                    newHundred.className = isDisc ? 'tool schijf schijf-blauw' : 'tool vlak-blauw';
                    if (isDisc) newHundred.textContent = '100';
                    document.querySelector('#schema-plus .plus-r1-h').appendChild(newHundred);
                    updateSchema();
                });
            }
        }

        function updateMinSchema() {
            const mainRect = mainContent.getBoundingClientRect();

            // Honderdtallen → tientallen
            document.querySelectorAll('#schema-min .min-bottom-box[data-column="H"] [data-value="100"][data-can-exchange="true"]').forEach(item => {
                const btn = document.createElement('button');
                btn.textContent = 'wissel om';
                btn.className = 'exchange-btn';
                const r = item.getBoundingClientRect();
                btn.style.left = `${r.right - mainRect.left + 5}px`;
                btn.style.top  = `${r.top   - mainRect.top}px`;
                btn.onclick = () => {
                    const isDisc = item.classList.contains('schijf');
                    item.remove();
                    const tensTarget = document.querySelector('#schema-min .min-bottom-box[data-column="T"]');
                    for (let i = 0; i < 10; i++) {
                        const ten = document.createElement('div');
                        ten.dataset.value = '10';
                        ten.style.position = 'absolute';
                        if (isDisc) {
                            ten.style.left = `${10 + (i % 5) * 65}px`;
                            ten.style.top  = `${10 + Math.floor(i / 5) * 65}px`;
                            ten.className = 'tool schijf schijf-groen'; ten.textContent = '10';
                        } else {
                            ten.style.left = '10px'; ten.style.top  = `${10 + i * 25}px`;
                            ten.className = 'tool staaf-groen';
                        }
                        tensTarget.appendChild(ten);
                    }
                    updateSchema();
                };
                mainContent.appendChild(btn);
            });

            // Tientallen → eenheden
            document.querySelectorAll('#schema-min .min-bottom-box[data-column="T"] [data-value="10"][data-can-exchange="true"]').forEach(item => {
                const btn = document.createElement('button');
                btn.textContent = 'wissel om';
                btn.className = 'exchange-btn';
                const r = item.getBoundingClientRect();
                btn.style.left = `${r.right - mainRect.left + 5}px`;
                btn.style.top  = `${r.top   - mainRect.top}px`;
                btn.onclick = () => {
                    const isDisc = item.classList.contains('schijf');
                    item.remove();
                    const unitsTarget = document.querySelector('#schema-min .min-bottom-box[data-column="E"]');
                    for (let i = 0; i < 10; i++) {
                        const one = document.createElement('div');
                        one.dataset.value = '1';
                        one.style.position = 'absolute';
                        if (isDisc) {
                            one.style.left = `${10 + (i % 5) * 65}px`;
                            one.style.top  = `${10 + Math.floor(i / 5) * 65}px`;
                            one.className = 'tool schijf schijf-geel'; one.textContent = '1';
                        } else {
                            one.style.left = `${10 + (i % 5) * 45}px`;
                            one.style.top  = `${10 + Math.floor(i / 5) * 45}px`;
                            one.className = 'tool geel-blok';
                        }
                        unitsTarget.appendChild(one);
                    }
                    updateSchema();
                };
                mainContent.appendChild(btn);
            });
        }

        // --- Listeners ---
        btnStartPlus.addEventListener('click', () => startApp('plus'));
        btnStartMin.addEventListener('click', () => startApp('min'));
        btnTerug.addEventListener('click', returnToStart);
        btnReset.addEventListener('click', resetApp);
        btnWisselSchema.addEventListener('click', () => {
            const toPlus = (schemaMin.style.display === 'grid');
            startApp(toPlus ? 'plus' : 'min');
        });

        // Eén pointer-handler voor het hele document (zoals in hulpschema.js)
        document.body.addEventListener('pointerdown', pointerDown, { passive: false });
    });
    </script>
</body>
</html>
