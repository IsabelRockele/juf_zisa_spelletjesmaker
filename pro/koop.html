<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Koop Zisa PRO</title>
  <meta http-equiv="Cache-Control" content="no-store" />
  <style>
    :root { --bg:#f7faf9; --card:#fff; --txt:#0f172a; --muted:#475569; --btn:#111827; }
    body{font-family:system-ui,Segoe UI,Arial,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100dvh;margin:0;background:var(--bg)}
    .card{max-width:720px;width:100%;background:var(--card);border:1px solid #e5e7eb;border-radius:14px;box-shadow:0 10px 24px rgba(0,0,0,.06);padding:24px}
    h1{margin:.2rem 0 1rem 0;color:var(--txt);font-size:2rem}
    p{color:var(--muted);margin:.4rem 0 1rem}
    label{font-weight:600;display:block;margin:.6rem 0 .25rem;color:var(--txt)}
    input[type=email]{width:100%;padding:.8rem;border:1px solid #d1d5db;border-radius:.6rem;font-size:1rem}
    .row{display:flex;gap:.8rem;align-items:center;margin-top:1rem;flex-wrap:wrap}
    button{padding:.8rem 1.1rem;border-radius:.6rem;border:1px solid #0f1729;background:var(--btn);color:#fff;cursor:pointer;font-weight:700}
    button[disabled]{opacity:.65;cursor:not-allowed}
    .muted{color:var(--muted);text-decoration:none}
    .price{display:inline-block;background:#e0f2fe;color:#075985;border-radius:.6rem;padding:.25rem .6rem;font-weight:700}
    .err{color:#b91c1c;margin-top:.6rem;min-height:1.2em}
  </style>
</head>
<body>
  <main class="card" role="main">
    <h1>Zisa PRO</h1>
    <p><span class="price">Jaarabonnement</span></p>
    <p>Vul uw e-mailadres in. Na de betaling wordt uw PRO-licentie automatisch geactiveerd en ontvangt u de mail “Wachtwoord instellen”.</p>

    <label for="email">E-mail voor uw licentie</label>
    <input id="email" type="email" placeholder="naam@school.be" autocomplete="email" required />

    <div class="row">
      <button id="buyBtn">Verder naar betaling</button>
      <a class="muted" href="./">Annuleren</a>
    </div>
    <div id="msg" class="err" role="alert" aria-live="polite"></div>
  </main>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getFunctions, httpsCallable } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-functions.js";

    // 1) Firebase init – VUL HIER UW CONFIG IN
    const firebaseConfig = {
  apiKey: "AIzaSyA1svbzlhdjiiDMyRIgqQq1jSu_F8li3Bw",
  authDomain: "zisa-spelletjesmaker-pro.firebaseapp.com",
  projectId: "zisa-spelletjesmaker-pro",
  storageBucket: "zisa-spelletjesmaker-pro.firebasestorage.app", // ok; we gebruiken Storage hier niet
  messagingSenderId: "828063957776",
  appId: "1:828063957776:web:8d8686b478846fe980db95",
  measurementId: "G-9LHNLFHSXX" // optioneel, mag blijven staan
};
    const app = initializeApp(firebaseConfig);
    const functions = getFunctions(app, "europe-west1");

    // 2) UI
    const $ = (id)=>document.getElementById(id);
    const btn = $("buyBtn"), msg = $("msg");

    // 3) Betaalflow – server bepaalt prijs (meestal €40)
    btn.addEventListener("click", async () => {
      msg.textContent = "";
      const email = $("email").value.trim().toLowerCase();
      if (!email) { msg.textContent = "Vul uw e-mailadres in."; return; }
      btn.disabled = true;
      try {
        const createPayment = httpsCallable(functions, "createPayment");
        const { data } = await createPayment({ email });
        if (data?.checkoutUrl) {
          location.assign(data.checkoutUrl);
        } else {
          msg.textContent = "Geen checkout-URL ontvangen. Probeer later opnieuw.";
        }
      } catch (e) {
        console.error(e);
        msg.textContent = (e && e.message) ? e.message : "Er ging iets mis. Probeer opnieuw.";
      } finally {
        btn.disabled = false;
      }
    });
  </script>
</body>
</html>



